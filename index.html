<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Little Cat Love Adventure</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        @media (max-width: 768px) {
            .game-container {
                width: 100%;
                height: 100%;
                border: none;
            }
            .cat {
                width: 30px;
                height: 30px;
            }
            .obstacle {
                width: 25px;
                height: 25px;
            }
            .coin {
                width: 15px;
                height: 15px;
            }
            .score-board {
                font-size: 20px;
            }
            .start-button {
                padding: 10px 20px;
                font-size: 20px;
            }
            .pause-button {
                padding: 8px 16px;
                font-size: 16px;
            }
        }
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f8ff;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .game-container {
            position: relative;
            width: 800px;
            height: 600px;
            border: 2px solid #333;
            overflow: hidden;
            background-image: url('forest_background.png'); 
            background-size: cover;
            animation: moveBackground 15s linear infinite;
        }

        @keyframes moveBackground {
            0% { background-position: 0 0; }
            100% { background-position: 0 1200px; }
        }

        .cat {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 120px;
            background: url('cute_cat_character.png') no-repeat center; 
            background-size: contain;
            border-radius: 15%; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: left 0.2s ease;
        }
        .obstacle {
            position: absolute;
            width: 80px;
            height: 80px;
            background: url('cartoon_rock.png') no-repeat center; 
            background-size: contain; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            border-radius: 50%;
            top: -120px;
            animation: moveObstacle 5s linear infinite;
        }

        .coin {
            position: absolute;
            width: 80px;
            height: 80px;
            background: url('golden_coin_shiny.png') no-repeat center; 
            background-size: cover; 
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            top: -40px;
            animation: moveCoin 6s linear infinite;
        }

        .score-board {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            color: #333;
        }

        .lives-board {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            color: #333;
        }

        .timer-board {
            position: absolute;
            top: 50px;
            left: 10px;
            font-size: 24px;
            color: #333;
        }

        .start-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 15px 30px;
            font-size: 24px;
            background-color: #ffcc00;
            border: none;
            cursor: pointer;
            border-radius: 10px;
        }

        .pause-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 10px 20px;
            font-size: 18px;
            background-color: #ff6666;
            border: none;
            cursor: pointer;
            border-radius: 10px;
            display: none;
        }

        @keyframes moveObstacle {
            0% { top: -120px; }
            100% { top: 600px; }
        }

        @keyframes moveCoin {
            0% { top: -80px; }
            100% { top: 600px; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="score-board" id="score-board">Score: 0</div>
        <div class="lives-board" id="lives-board">Lives: 3</div>
        <div class="timer-board" id="timer-board">Time: 0:00</div>
        <button class="start-button" id="start-button">Start Game</button>
        <button class="pause-button" id="pause-button">Pause</button>
        <div class="cat" id="cat"></div>
        <div class="obstacle" id="obstacle"></div>
        <div class="coin" id="coin"></div>
    </div>
    <audio id="coin-sound" src="coin-257878.mp3" preload="auto"></audio>
    <audio id="jump-sound" src="toy-button-105724.mp3" preload="auto"></audio>
    <audio id="game-over-sound" src="small-rock-break-194553.mp3" preload="auto"></audio>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cat = document.getElementById('cat');
            const gameContainer = document.querySelector('.game-container');
            const coin = document.getElementById('coin');
            const scoreBoard = document.getElementById('score-board');
            const livesBoard = document.getElementById('lives-board');
            const timerBoard = document.getElementById('timer-board');
            const startButton = document.getElementById('start-button');
            const pauseButton = document.getElementById('pause-button');
            const coinSound = document.getElementById('coin-sound');
            const jumpSound = document.getElementById('jump-sound');
            const gameOverSound = document.getElementById('game-over-sound');
            let isJumping = false;
            let score = 0;
            let lives = 3;
            let gameInterval;
            let isGamePaused = false;
            let speed = 5;
            let elapsedTime = 0;
            let timerInterval;

            startButton.addEventListener('click', () => {
                isGamePaused = false;
                startGame();
            });
            pauseButton.addEventListener('click', togglePause);

            function startGame() {
                startButton.style.display = 'none';
                pauseButton.style.display = 'block';
                isGamePaused = false;
                gameInterval = requestAnimationFrame(gameLoop);
                startTimer();
            }

            function togglePause() {
                if (isGamePaused) {
                    gameInterval = requestAnimationFrame(gameLoop);
                    startTimer();
                    pauseButton.textContent = 'Pause';
                    isGamePaused = false;
                } else {
                    isGamePaused = true;
                    cancelAnimationFrame(gameInterval);
                    clearInterval(timerInterval);
                    pauseButton.textContent = 'Resume';
                }
            }

            function startTimer() {
                timerInterval = setInterval(() => {
                    if (!isGamePaused) {
                        elapsedTime++;
                        const minutes = Math.floor(elapsedTime / 60);
                        const seconds = elapsedTime % 60;
                        timerBoard.textContent = `Time: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
                    }
                }, 1000);
            }

            document.addEventListener('keydown', function(event) {
                if (isGamePaused) return;
                let catLeft = parseInt(window.getComputedStyle(cat).getPropertyValue('left'));
                if (event.key === 'ArrowLeft' && catLeft > 0) {
                    catLeft = Math.max(0, catLeft - 100);
                    cat.style.left = catLeft + 'px';
                } else if (event.key === 'ArrowRight' && catLeft < gameContainer.clientWidth - cat.clientWidth) {
                    catLeft = Math.min(gameContainer.clientWidth - cat.clientWidth, catLeft + 100);
                    cat.style.left = catLeft + 'px';
                } else if (event.key === 'ArrowUp' && !isJumping) {
                    jump();
                }
            });

            function jump() {
                isJumping = true;
                jumpSound.play();
                let count = 0;
                let catBottom = parseInt(window.getComputedStyle(cat).getPropertyValue('bottom'));
                const jumpInterval = setInterval(() => {
                    if (count < 15) {
                        catBottom += 5;
                        cat.style.bottom = catBottom + 'px';
                    } else if (count < 30) {
                        catBottom -= 5;
                        cat.style.bottom = catBottom + 'px';
                    } else {
                        clearInterval(jumpInterval);
                        isJumping = false;
                    }
                    count++;
                }, 20);
            }

            function checkCollision(cat, element) {
                const catRect = cat.getBoundingClientRect();
                const elementRect = element.getBoundingClientRect();
                return !(
                    catRect.right < elementRect.left ||
                    catRect.left > elementRect.right ||
                    catRect.bottom < elementRect.top ||
                    catRect.top > elementRect.bottom
                );
            }

            function gameLoop() {
                if (isGamePaused) return;

                const obstacle = document.getElementById('obstacle');

                // Randomize obstacle lane and reset position if it reaches the bottom
                if (obstacle.getBoundingClientRect().top >= gameContainer.clientHeight) {
                    const lanes = [100, 300, 500];
                    const randomLane = lanes[Math.floor(Math.random() * lanes.length)];
                    obstacle.style.left = randomLane + 'px';
                    obstacle.style.top = '-120px';
                    speed += 0.5; // Increase speed to make the game more challenging
                } else {
                    obstacle.style.top = (parseInt(obstacle.style.top) || -120) + speed + 'px';
                }

                // Only check collision when obstacle is above the bottom edge
                if (obstacle.getBoundingClientRect().top < gameContainer.clientHeight - obstacle.clientHeight) {
                    if (checkCollision(cat, obstacle)) {
                        gameOverSound.play();
                        lives--;
                        livesBoard.textContent = 'Lives: ' + lives;
                        if (lives <= 0) {
                            setTimeout(() => {
                                alert('Game Over! Your score: ' + score);
                                window.location.reload();
                            }, 100);
                        } else {
                            obstacle.style.top = '-120px';
                        }
                    }
                }

                gameInterval = requestAnimationFrame(gameLoop);
            }

            function resetCoin() {
                const lanes = [50, 250, 450, 650];
                const randomLane = lanes[Math.floor(Math.random() * lanes.length)];
                coin.style.left = randomLane + 'px';
                coin.style.top = '-80px';
            }

            function updateCoin() {
                if (coin.getBoundingClientRect().top >= gameContainer.clientHeight) {
                    resetCoin();
                } else {
                    coin.style.top = (parseInt(coin.style.top) || -80) + speed + 'px';
                }

                if (checkCollision(cat, coin)) {
                    score += 10;
                    scoreBoard.textContent = 'Score: ' + score;
                    coin.style.display = 'none';
                    coinSound.play();
                    setTimeout(() => {
                        coin.style.display = 'block';
                        resetCoin();
                    }, 1000);
                }
            }

            setInterval(updateCoin, 100);

            document.addEventListener('touchstart', handleTouchStart, false);
            document.addEventListener('touchmove', handleTouchMove, false);

            let xDown = null;
            let yDown = null;

            function handleTouchStart(evt) {
                const firstTouch = evt.touches[0];
                xDown = firstTouch.clientX;
                yDown = firstTouch.clientY;
            }

            function handleTouchMove(evt) {
                if (!xDown || !yDown) {
                    return;
                }

                let xUp = evt.touches[0].clientX;
                let yUp = evt.touches[0].clientY;

                let xDiff = xDown - xUp;
                let yDiff = yDown - yUp;

                let catLeft = parseInt(window.getComputedStyle(cat).getPropertyValue('left'));

                if (Math.abs(xDiff) > Math.abs(yDiff)) { // Horizontal swipe
                    if (xDiff > 0 && catLeft > 0) {
                        // Left swipe
                        catLeft = Math.max(0, catLeft - 100);
                        cat.style.left = catLeft + 'px';
                    } else if (xDiff < 0 && catLeft < gameContainer.clientWidth - cat.clientWidth) {
                        // Right swipe
                        catLeft = Math.min(gameContainer.clientWidth - cat.clientWidth, catLeft + 100);
                        cat.style.left = catLeft + 'px';
                    }
                } else { // Vertical swipe
                    if (yDiff > 0 && !isJumping) {
                        // Up swipe
                        jump();
                    }
                }

                // Reset values
                xDown = null;
                yDown = null;
            }
        });
    </script>
</body>
</html>
